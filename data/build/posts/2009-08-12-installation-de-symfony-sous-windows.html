<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <title>Document</title>
</head>
<body>
        <p>Voici un petit tutoriel simple et rapide qui vous permettra de préparer votre environnement de travail puis d'installer symfony. Étapes nécessaires avant de pouvoir utiliser cet excellent framework! :)</p>

<p>La procédure d'installation de symfony sur une architecture WAMP ne présente aucune difficulté particulière et peux aisément se réaliser en suivant les instructions de la <a href="http://www.symfony-project.org/book/1_2/03-Running-Symfony#chapter_03_installing_the_symfony_libraries" title="Documentation officielle permettant d'installer le framework symfony">documentation officielle</a> du framework symfony ou du <a href="http://www.symfony-project.org/jobeet/1_2/Propel/en/01#chapter_01_symfony_installation" title="Premier chapitre du tutoriel Jobeet">premier chapitre</a> de l'excellent tutoriel <a href="http://www.symfony-project.org/jobeet/1_2/" title="Tutoriel Jbeet">Jobeet</a>.</p>

<p>Cependant, pour celles et ceux que l'anglais horripile ou qui préfèrent suivre des explications adaptées à leur plateforme, voici les étapes à suivre pour installer le framework symfony.</p>

<p>Seul prérequis avant de démarrer l'installation, assurez-vous d'avoir une version de <a href="http://www.wampserver.com/" title="Site officiel de WampServer">WampServer</a> à jour.</p>

<h2>Première étape: Installation de PEAR</h2>

<p>Définition de <a href="http://fr.wikipedia.org/wiki/PEAR" title="Définition de PEAR sur Wikipedia">Wikipedia</a> pour <a href="http://pear.php.net/" title="Site officiel de PEAR">PEAR</a>:</p>

<blockquote>
  <p><em>PEAR</em> (pour <em>PHP Extension and Application Repository</em>) est une collection de bibliothèques PHP. C'est aussi une application qui permet de gérer les bibliothèques (installer ou mettre à jour une bibliothèque).</p>
</blockquote>

<p>PEAR va permettre d'installer symfony (<a href="http://pear.php.net/packages.php" title="Liste des packaches PEAR disponibles">ainsi que de nombreux autres packages</a>) grâce à une simple ligne de commande.</p>

<p><em>MAJ: La manipulation permettant d'installer PEAR dépend maintenant de votre version de WampServer (merci à <a href="http://www.odolbeau.fr/installation-de-symfony-sous-windows/comment-page-1#comment-12">LeoSquall</a> pour la remarque!)</em></p>

<ul>
<li><p><strong>Version 2.0h ou inférieure:</strong></p>

<p>Pour installer PEAR, lancez <code>go-pear.bat</code> situé dans le dossier <code>bin/php/php5.x.x</code> de votre répertoire d'installation de WampServer en utilisant l'invite de commande.</p>

<p>Ce qui donne dans mon cas:</p>

<p><code>language-bash
cd C:\APPS\WampServer\bin\php\php5.2.6
go-pear.bat</code></p></li>
<li><p><strong>Version 2.0i ou supérieure:</strong></p>

<p>Créez un fichier <code>script.bat</code> dans le dossier <code>bin/php/php5.x.x</code> de votre répertoire d'installation de WampServer puis copiez-y le code suivant:</p>

<p><code>language-bash
php -d phar.require_hash=0 PEAR\go-pear.phar</code></p>

<p>Exécutez le script en double cliquant dessus ou via l'invite de commande</p></li>
</ul>

<p><em>MAJ: Vous pouvez continuer de suivre ce tutorial, quelque soit votre version de WampServer! :)</em></p>

<div class="img-container-medium alignright">
    <img title="Modification de la variable Path" src="/images/posts/2009-08-12/variables-environnement.jpg" alt="Modification de la variable Path" width="235" height="270" />
    <p class="legend">Modification de la variable Path</p>
</div>

<p>Au cours de l'installation, contentez-vous d'appuyez sur Entrée à chaque nouvelle demande et de répondre par l'affirmative lorsque que le script vous demandera si vous souhaitez qu'il modifie votre fichier php.ini (<em>Would you like to alter php.ini ?</em>).</p>

<p>Maintenant que PEAR est installé, il ne reste plus qu'à s'en servir! :) Pour cela il va falloir rajouter une nouvelle variable système. Rien de plus simple:
Clic droit sur le poste de travail -> Propriétés -> Onglet "Avancé" -> Variables système.</p>

<p>Modifiez à présent la variable Path en ajoutant simplement à la fin de la chaine l'adresse du dossier utilisé auparavant (celui dans lequel se situe le script go-pear.bat) précédé d'un point virgule.
Dans mon cas: <code>; C:\APPS\WampServer\bin\php\php5.2.6</code></p>

<p>Fermer l'invite de commande puis ré-ouvrez la afin que les modifications soient prises en compte.</p>

<p>Voilà, PEAR est installé et fonctionnel!</p>

<h2>Deuxième étape: Installation de symfony</h2>

<p>Comme expliqué ci-dessus, PEAR va maintenant nous permettre d'installer symfony grâce à une simple ligne de commande! Ou plutôt deux! La première va permettre d'enregistrer un nouveau <a href="http://pear.php.net/channels/" title="Liste des channels PEAR">channel</a> contenant une liste de packages. Une fois ce channel ajouté, il suffit d'installer le package de son choix, en l'occurrence, la dernière version stable de symfony. Voici les commandes:</p>

<p><code>language-bash
pear channel-discover pear.symfony-project.com</code></p>

<p>puis</p>

<p><code>language-bash
pear install symfony/symfony</code></p>

<p>A présent que symfony est installé, reste à mettre en place un minimum de configuration.</p>

<h2>Troisième étape: Configuration</h2>

<p>Afin de faire fonctionner symfony, il faut vérifier et éventuellement modifier votre configuration de php et d'<a href="http://www.apache.org/" title="Site officiel d'apache">apache</a>.</p>

<h3>Modification de la configuration de php</h3>

<p>Tout d'abord, ouvrez le fichier <code>php.ini</code> situé dans le même dossier qu'auparavant. Si vous utilisez WampServer, une fois celui-ci démarré, vous pouvez accéder rapidement au fichier en cliquant (gauche) sur l'icône de WampServer dans la barre des taches, puis PHP -> php.ini.</p>

<p>Dans ce fichier, deux choses à vérifier. Rechercher <code>memory_limit</code> et vérifier que la valeur est supérieure ou égale à 16M (<code>memory_limit = 16M</code>).</p>

<p>Enfin, si vous utilisez une version inférieure à PHP 5.3, vérifier que les <a href="http://fr2.php.net/magic_quotes" title="Présentation des magic quotes sur le site php.net">magic quotes</a> (guillemets magiques) sont désactivés (<code>magic_quotes_gpc = Off</code>)</p>

<h3>Modification de la configuration d'apache</h3>

<p>Ouvrez maintenant le fichier <code>httpd.conf</code> situé dans le dossier <code>bin/apache/apache2.x.x/conf</code> du répertoire d'installation de WampServer ou encore une fois, accédez-y via l'icône de WampServer situé dans la barre des tâches (Apache -> httpd.conf)</p>

<p>Vérifiez que le module apache de rewriting, <a href="http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html" title="Documentation officiel d'apache: l'extension mod_rewrite">rewrite_module</a> est bien activé (pas de # devant la ligne: <code>LoadModule rewrite_module modules/mod_rewrite.so</code>)</p>

<p>N'oubliez pas de redémarrer le serveur apache afin que les modifications soient prises en compte!</p>

<p>Dernière étape, nous devons permettre au serveur apache d'accéder aux images, feuilles de styles et fichier  javascript fournis par symfony et utilisé notamment par l'admin generator, les pages par défaut et la barre de debug.</p>

<p>La solution la plus optimale est d'utiliser un <a href="http://httpd.apache.org/docs/2.2/mod/mod_alias.html" title="Documentation officielle d'apache: le module alias">alias</a> apache (plus ou moins l'équivalent d'un <a href="http://fr.wikipedia.org/wiki/Lien_symbolique" title="Définition d'un lien symbolique sur Wikipedia">lien symbolique</a> sous unix). Cependant, cette solution dépendant notamment de votre configuration apache existante et de l'utilisation que vous faites de votre serveur (multi-sites, etc) je ne la détaillerai pas dans cet article. Vous trouverez néanmoins un nombre important d'informations dans la <a href="http://www.symfony-project.org/book/1_2/03-Running-Symfony#chapter_03_configuring_the_web_server" title="Documentation officielle de symfony: configurer le serveur web">documentation officielle de symfony</a> ou dans celle d'<a href="http://httpd.apache.org/docs/2.2/mod/mod_alias.html" title="Documentation officielle d'apache: l'extension mod_alias">apache</a>.</p>

<p>Nous allons donc nous contenter d'utiliser la seconde solution. Pour cela, commencez par créer votre projet symfony en suivant les instructions de la <a href="http://www.symfony-project.org/book/1_2/03-Running-Symfony#chapter_03_setting_up_an_application" title="Documentation officielle de symfony: mettre en oeuvre une application">documentation</a>, puis copiez/collez l'ensemble des fichiers situés dans le dossier <code>bin/php/php5.2.6/data/symfony/web/sf</code> du répertoire d'installation de WampServer dans le répertoire web/sf de votre projet symfony. Cette solution fonctionne parfaitement, néanmoins vous serez obligé de refaire cette manipulation pour chaque projet que vous réaliserez sur votre machine mais également à chaque nouvelle version de symfony que vous utiliserez par la suite.</p>

</body>
</html>